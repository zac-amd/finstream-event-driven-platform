# =============================================================================
# FinStream - Environment Variables
# =============================================================================
# Copy this file to .env and adjust values as needed
# =============================================================================

# -----------------------------------------------------------------------------
# General
# -----------------------------------------------------------------------------
ENVIRONMENT=development
LOG_LEVEL=INFO
DEBUG=true

# -----------------------------------------------------------------------------
# Kafka / Redpanda
# -----------------------------------------------------------------------------
KAFKA_BOOTSTRAP_SERVERS=localhost:19092
SCHEMA_REGISTRY_URL=http://localhost:18081

# Kafka Producer Settings
KAFKA_PRODUCER_ACKS=all
KAFKA_PRODUCER_RETRIES=3
KAFKA_PRODUCER_LINGER_MS=5
KAFKA_PRODUCER_BATCH_SIZE=16384
KAFKA_PRODUCER_COMPRESSION_TYPE=snappy

# Kafka Consumer Settings
KAFKA_CONSUMER_GROUP_ID=finstream-consumer
KAFKA_CONSUMER_AUTO_OFFSET_RESET=earliest
KAFKA_CONSUMER_ENABLE_AUTO_COMMIT=false
KAFKA_CONSUMER_MAX_POLL_RECORDS=500

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_MAX_CONNECTIONS=10
REDIS_DECODE_RESPONSES=true

# Cache TTLs (in seconds)
CACHE_TTL_QUOTES=5
CACHE_TTL_CANDLES=60
CACHE_TTL_STATISTICS=300

# -----------------------------------------------------------------------------
# TimescaleDB / PostgreSQL
# -----------------------------------------------------------------------------
TIMESCALE_URL=postgresql://finstream:finstream@localhost:5432/finstream
TIMESCALE_POOL_SIZE=10
TIMESCALE_MAX_OVERFLOW=20
TIMESCALE_POOL_TIMEOUT=30

# -----------------------------------------------------------------------------
# Market Simulator
# -----------------------------------------------------------------------------
# Comma-separated list of symbols to simulate
SYMBOLS=AAPL,GOOGL,MSFT,AMZN,META,NVDA,TSLA,JPM,V,JNJ

# Trading parameters
TRADES_PER_SECOND=100
ENABLE_QUOTES=true
QUOTE_UPDATE_INTERVAL_MS=100

# Market hours simulation (UTC)
MARKET_OPEN_HOUR=14
MARKET_CLOSE_HOUR=21

# Price model parameters
PRICE_VOLATILITY=0.02
PRICE_DRIFT=0.0001

# -----------------------------------------------------------------------------
# Stream Processor
# -----------------------------------------------------------------------------
FAUST_STORE_URL=rocksdb://
FAUST_PROCESSING_GUARANTEE=exactly_once
FAUST_STREAM_BUFFER_MAX_SIZE=32768

# -----------------------------------------------------------------------------
# Aggregation Service
# -----------------------------------------------------------------------------
# Comma-separated list of candle intervals
CANDLE_INTERVALS=1m,5m,15m,1h

# Window settings
AGGREGATION_WINDOW_GRACE_PERIOD_MS=5000
AGGREGATION_EMIT_INTERVAL_MS=1000

# -----------------------------------------------------------------------------
# Alert Service
# -----------------------------------------------------------------------------
# Anomaly detection thresholds
PRICE_SPIKE_THRESHOLD=0.05
VOLUME_ANOMALY_THRESHOLD=3.0
SPREAD_ANOMALY_THRESHOLD=0.01

# Alert cooldown (seconds)
ALERT_COOLDOWN_SECONDS=60

# Notification channels
ENABLE_WEBHOOK_NOTIFICATIONS=true
WEBHOOK_URL=http://localhost:8080/webhooks/alerts

# -----------------------------------------------------------------------------
# API Gateway
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000

# CORS settings
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# Rate limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# JWT settings (for future auth)
JWT_SECRET_KEY=your-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=30

# WebSocket settings
WS_HEARTBEAT_INTERVAL=30
WS_MAX_CONNECTIONS=1000

# -----------------------------------------------------------------------------
# Query Service
# -----------------------------------------------------------------------------
CACHE_TTL_SECONDS=60
MAX_QUERY_LIMIT=10000
DEFAULT_QUERY_LIMIT=1000

# -----------------------------------------------------------------------------
# Observability - Jaeger
# -----------------------------------------------------------------------------
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
JAEGER_SERVICE_NAME=finstream
JAEGER_SAMPLER_TYPE=probabilistic
JAEGER_SAMPLER_PARAM=0.1

# Enable tracing
TRACING_ENABLED=true

# -----------------------------------------------------------------------------
# Observability - Prometheus
# -----------------------------------------------------------------------------
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc

# Enable metrics
METRICS_ENABLED=true
METRICS_PORT=8000

# -----------------------------------------------------------------------------
# Observability - Logging
# -----------------------------------------------------------------------------
LOG_FORMAT=json
LOG_OUTPUT=stdout

# Loki settings (for log shipping)
LOKI_URL=http://localhost:3100

# -----------------------------------------------------------------------------
# AWS (for production deployment)
# -----------------------------------------------------------------------------
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# MSK (Managed Kafka)
MSK_BOOTSTRAP_SERVERS=

# ElastiCache (Redis)
ELASTICACHE_ENDPOINT=

# Timestream
TIMESTREAM_DATABASE=finstream
TIMESTREAM_TABLE=market_data

# S3 (for data archival)
S3_BUCKET_NAME=finstream-data
S3_ARCHIVE_PREFIX=archive/

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_ENABLE_QUOTES=true
FEATURE_ENABLE_ORDERS=false
FEATURE_ENABLE_ALERTS=true
FEATURE_ENABLE_ANALYTICS=true
